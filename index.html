<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>CSSå˜ä½ã«ã¤ã„ã¦</title>
  </head>
  <body>
    <h1>ğŸ¨ CSSå˜ä½ã«ã¤ã„ã¦</h1>

    <div class="experiment-section">
      <h2>Step 1: çµ¶å¯¾å˜ä½ï¼ˆpxï¼‰ã‚’ç†è§£ã™ã‚‹</h2>
      <p>
        <strong>pxï¼ˆãƒ”ã‚¯ã‚»ãƒ«ï¼‰</strong
        >ã¯ç”»é¢ä¸Šã®æœ€å°å˜ä½ã§ã€å¸¸ã«åŒã˜ã‚µã‚¤ã‚ºã‚’ä¿ã¡ã¾ã™ã€‚
      </p>

      <div class="demo-box px-demo" id="px-demo">
        <span class="size-indicator"></span>
      </div>

      <div class="task">
        <h3>ğŸ”§ å®Ÿç¿’ã‚¿ã‚¹ã‚¯ 1</h3>
        <p>
          CSSã® <code>.px-demo</code> ã®
          <code>width</code> ã‚’ä»¥ä¸‹ã®å€¤ã«å¤‰æ›´ã—ã¦ã€çµæœã‚’è¦³å¯Ÿã—ã¦ãã ã•ã„ï¼š
        </p>
        <ul>
          <li><code>200px</code> ã«å¤‰æ›´</li>
          <li><code>400px</code> ã«å¤‰æ›´</li>
          <li>
            ãƒ–ãƒ©ã‚¦ã‚¶ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ã‚µã‚¤ã‚ºã‚’å¤‰æ›´ã—ã¦ã‚‚ã€ãƒœãƒƒã‚¯ã‚¹ã®ã‚µã‚¤ã‚ºã¯å¤‰ã‚ã‚‰ãªã„ã“ã¨ã‚’ç¢ºèª
          </li>
        </ul>
      </div>
    </div>

    <div class="experiment-section">
      <h2>Step 2: ç›¸å¯¾å˜ä½ï¼ˆ%ï¼‰ã‚’ç†è§£ã™ã‚‹</h2>
      <p>
        <strong>%ï¼ˆãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆï¼‰</strong
        >ã¯è¦ªè¦ç´ ã®ã‚µã‚¤ã‚ºã«å¯¾ã™ã‚‹å‰²åˆã§æŒ‡å®šã—ã¾ã™ã€‚
      </p>

      <div class="percent-box">
        <div class="demo-box percent-demo">
          <!-- ã“ã“ã«ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆã®å€¤ãŒå…¥ã‚‹ -->
          <span class="size-indicator">60%</span>
        </div>
      </div>

      <div class="task">
        <h3>ğŸ”§ å®Ÿç¿’ã‚¿ã‚¹ã‚¯ 2</h3>
        <p>ä»¥ä¸‹ã®å®Ÿé¨“ã‚’è¡Œã£ã¦ãã ã•ã„ï¼š</p>
        <ol>
          <li>
            <code>.percent-demo</code> ã® <code>width</code> ã‚’
            <code>30%</code> ã‚„ <code>80%</code> ã«å¤‰æ›´
          </li>
          <li>
            ãƒ–ãƒ©ã‚¦ã‚¶ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ã‚µã‚¤ã‚ºã‚’å¤‰æ›´ã—ã¦ã€ãƒœãƒƒã‚¯ã‚¹ãŒè¦ªè¦ç´ ï¼ˆç™½ã„èƒŒæ™¯éƒ¨åˆ†ï¼‰ã«è¿½éšã™ã‚‹ã“ã¨ã‚’ç¢ºèª
          </li>
          <li>
            ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆæŒ‡å®šã®è¦ç´ ã¯ã€è¦ªè¦ç´ ã®å¹…(ä»Šå›ã¯<code>"percent-box"</code>)ãŒå¤‰ã‚ã‚‹ã¨è‡ªå‹•çš„ã«ã‚µã‚¤ã‚ºãŒèª¿æ•´ã•ã‚Œã‚‹ã“ã¨ã‚’ç†è§£
          </li>
        </ol>
      </div>
    </div>

    <div class="experiment-section">
      <h2>Step 3: ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå˜ä½ï¼ˆvw/vhï¼‰ã‚’ç†è§£ã™ã‚‹</h2>
      <p>
        <strong>vw/vh</strong
        >ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®è¡¨ç¤ºé ˜åŸŸï¼ˆãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆï¼‰ã‚’åŸºæº–ã¨ã—ã¾ã™ã€‚<br />
        <code>1vw = ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå¹…ã®1%</code>ã€<code
          >1vh = ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆé«˜ã•ã®1%</code
        >
      </p>

      <div class="demo-box vw-demo">
        <!--  ã“ã“ã«å¹…ã®å€¤ãŒå…¥ã‚‹ -->
        <span class="size-indicator">50vw</span>
      </div>

      <div class="demo-box vh-demo">
        <!--  ã“ã“ã«é«˜ã•ã®å€¤ãŒå…¥ã‚‹ -->
        <span class="size-indicator">25vh</span>
      </div>

      <div class="task">
        <h3>ğŸ”§ å®Ÿç¿’ã‚¿ã‚¹ã‚¯ 3</h3>
        <p>ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå˜ä½ã®å‹•ä½œã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š</p>
        <ol>
          <li>
            <code>.vw-demo</code> ã® <code>width</code> ã‚’ <code>30vw</code> ã‚„
            <code>70vw</code> ã«å¤‰æ›´
          </li>
          <li>
            <code>.vh-demo</code> ã® <code>height</code> ã‚’ <code>15vh</code> ã‚„
            <code>40vh</code> ã«å¤‰æ›´
          </li>
          <li>
            ãƒ–ãƒ©ã‚¦ã‚¶ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ã‚µã‚¤ã‚ºã‚’å¤‰æ›´ã—ã¦ã€ã“ã‚Œã‚‰ã®ãƒœãƒƒã‚¯ã‚¹ãŒç”»é¢ã‚µã‚¤ã‚ºã«ç›´æ¥é€£å‹•ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
          </li>
          <li>
            %ã¨ã®é•ã„ï¼š%ã¯è¦ªè¦ç´ åŸºæº–ã€vw/vhã¯ç”»é¢ã‚µã‚¤ã‚ºåŸºæº–ã§ã‚ã‚‹ã“ã¨ã‚’ç†è§£
          </li>
        </ol>
      </div>
    </div>

    <div class="experiment-section">
      <h2>Step 4: ãƒ•ã‚©ãƒ³ãƒˆåŸºæº–å˜ä½ï¼ˆem/remï¼‰ã‚’ç†è§£ã™ã‚‹</h2>
      <p>
        <strong>em</strong
        >ã¯è¦ªè¦ç´ ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºåŸºæº–ã€<strong>rem</strong>ã¯ãƒ«ãƒ¼ãƒˆè¦ç´ ï¼ˆhtmlï¼‰ã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºåŸºæº–ã§ã™ã€‚
      </p>

      <div class="parent-container">
        <p class="instruction">ã“ã®è¦ªã‚³ãƒ³ãƒ†ãƒŠã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã¯18pxã§ã™</p>

        <div class="demo-box em-demo">
          <!-- ã“ã“ã«å€¤ãŒå…¥ã‚‹ -->
          <span class="size-indicator">15em</span>
        </div>

        <div class="demo-box rem-demo">
          <!-- ã“ã“ã«å€¤ãŒå…¥ã‚‹ -->
          <span class="size-indicator">15rem</span>
        </div>
      </div>

      <div class="task">
        <h3>ğŸ”§ å®Ÿç¿’ã‚¿ã‚¹ã‚¯ 4</h3>
        <p>em ã¨ rem ã®é•ã„ã‚’ä½“é¨“ã—ã¦ãã ã•ã„ï¼š</p>
        <ol>
          <li>
            <code>.parent-container</code> ã® <code>font-size</code> ã‚’
            <code>24px</code> ã«å¤‰æ›´ã—ã¦ã€em ãƒœãƒƒã‚¯ã‚¹ã®ã‚µã‚¤ã‚ºå¤‰åŒ–ã‚’ç¢ºèª
          </li>
          <li>
            <code>html</code> ã® <code>font-size</code> ã‚’
            <code>20px</code> ã«å¤‰æ›´ã—ã¦ã€rem ãƒœãƒƒã‚¯ã‚¹ã®ã‚µã‚¤ã‚ºå¤‰åŒ–ã‚’ç¢ºèª
          </li>
          <li>
            em ã¯è¦ªè¦ç´ ã®å½±éŸ¿ã‚’å—ã‘ã€rem ã¯å¸¸ã«ãƒ«ãƒ¼ãƒˆè¦ç´ ã‚’åŸºæº–ã¨ã™ã‚‹ã“ã¨ã‚’ç†è§£
          </li>
        </ol>
      </div>
    </div>

    <div class="experiment-section">
      <h2>ğŸ“š å­¦ç¿’ã®ã¾ã¨ã‚</h2>

      <h3>âœ… å˜ä½ã®ç¨®é¡ã¨ç‰¹å¾´</h3>
      <ul>
        <li>
          <strong>çµ¶å¯¾å˜ä½ï¼ˆpxï¼‰</strong> â€¦ å¸¸ã«åŒã˜å¤§ãã•ã€‚<br />
          â†’ ã‚¢ã‚¤ã‚³ãƒ³ã‚„ãƒœãƒ¼ãƒ€ãƒ¼ãªã©ã€å›ºå®šã‚µã‚¤ã‚ºãŒå¿…è¦ãªå ´é¢ã«ä½¿ã†ã€‚
        </li>
        <li>
          <strong>ç›¸å¯¾å˜ä½ï¼ˆ% / vw / vhï¼‰</strong> â€¦
          ç”»é¢ã‚„è¦ªè¦ç´ ã«åˆã‚ã›ã¦ä¼¸ç¸®ã€‚<br />
          â†’ ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«ä¾¿åˆ©ã€‚
        </li>
        <li>
          <strong>ãƒ•ã‚©ãƒ³ãƒˆåŸºæº–å˜ä½ï¼ˆem / remï¼‰</strong> â€¦
          ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’åŸºæº–ã«æ‹¡ç¸®ã€‚<br />
          â†’ ãƒ†ã‚­ã‚¹ãƒˆã‚„ä½™ç™½ã‚’ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã«æŒ‡å®šã§ãã‚‹ã€‚
        </li>
      </ul>
    </div>
  </body>
  <!-- app.jsã‚’èª­ã¿è¾¼ã‚€ -->
  <script>
    // ç”»é¢ä¸Šã«å„ãƒ‡ãƒ¢ã®ç¾åœ¨ã‚µã‚¤ã‚ºï¼ˆpx / % / vw / vh / em / rem / font-sizeï¼‰ã‚’è¡¨ç¤ºã™ã‚‹
document.addEventListener("DOMContentLoaded", () => {
  const debounce = (fn, wait = 100) => {
    let t;
    return (...args) => {
      clearTimeout(t);
      t = setTimeout(() => fn(...args), wait);
    };
  };

  function ensureIndicator(el) {
    let ind = el.querySelector(".size-indicator");
    if (!ind) {
      ind = document.createElement("span");
      ind.className = "size-indicator";
      ind.style.display = "block";
      ind.style.marginTop = "8px";
      ind.style.fontWeight = "700";
      ind.style.height = "50px";
      el.appendChild(ind);
    }
    return ind;
  }

  function ensureLabel(el) {
    // ãƒ¡ã‚¤ãƒ³è¡¨ç¤ºç”¨ãƒ©ãƒ™ãƒ«ï¼ˆtextContent ã‚’ç›´æ¥æ›¸ãæ›ãˆã‚‹ä»£ã‚ã‚Šã«ä½¿ã†ï¼‰
    let lbl = el.querySelector(".demo-label");
    if (!lbl) {
      lbl = document.createElement("div");
      lbl.className = "demo-label";
      lbl.style.display = "block";
      lbl.style.fontWeight = "600";
      // label ã‚’å…ˆé ­ã«æŒ¿å…¥ï¼ˆå…ƒã®èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆã®ä»£ã‚ã‚Šã«ãªã‚‹ï¼‰
      el.insertBefore(lbl, el.firstChild);
    }
    return lbl;
  }

  function updateIndicators() {
    const demos = document.querySelectorAll(".demo-box, .clamp-text");
    demos.forEach((el) => {
      const ind = ensureIndicator(el);
      const lbl = ensureLabel(el);
      const rect = el.getBoundingClientRect();
      const cs = getComputedStyle(el);
      let indicatorText = "";
      let labelText = "";

      if (el.classList.contains("px-demo")) {
        const w = Math.round(rect.width);
        indicatorText = `${w}px`;
        labelText = `å¹…: ${w}px`;
      } else if (el.classList.contains("percent-demo")) {
        const w = Math.floor(rect.width);
        const parent = el.parentElement || document.documentElement;
        const parentW =
          parent.getBoundingClientRect().width ||
          document.documentElement.clientWidth;
        const pct = Math.floor((w / parentW) * 100) + 1;
        indicatorText = `${pct}% (${w}px)`;
        labelText = `å¹…: ${pct}%`;
      } else if (el.classList.contains("vw-demo")) {
        const w = Math.floor(rect.width);
        const vw = Math.floor(((w / window.innerWidth) * 100).toFixed(1));
        indicatorText = `${w}px (${vw}vw)`;
        labelText = `å¹…: ${w}px (${vw}vw)`;
      } else if (el.classList.contains("vh-demo")) {
        const h = Math.floor(rect.height);
        const vh = Math.floor((h / window.innerHeight) * 100);
        indicatorText = `${h}px (${vh}vh)`;
        labelText = `é«˜ã•: ${h}px \n (${vh}vh)`;
      } else if (el.classList.contains("em-demo")) {
        const style = window.getComputedStyle(el);
        const w = rect.width;
        const parentFont =
          parseFloat(getComputedStyle(el.parentElement).fontSize) || 16;
        const em = (w / parentFont).toFixed(2);
        indicatorText = `${em}em (${Math.round(w)}px)`;
        labelText = `å¹…: ${em}em (${Math.round(w)}px)`;
      } else if (el.classList.contains(".parent-container")) {
        const instruction = el.querySelector(".instruction");
        const style = window.getComputedStyle(el);
        console.log(style.fontSize);
        instruction.textContent = `è¦ªã‚³ãƒ³ãƒ†ãƒŠã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º: ${style.fontSize}`;
      } else if (el.classList.contains("rem-demo")) {
        const w = rect.width;
        const rootFont =
          parseFloat(getComputedStyle(document.documentElement).fontSize) || 16;
        const rem = (w / rootFont).toFixed(2);
        indicatorText = `${rem}rem (${Math.round(w)}px)`;
        labelText = `å¹…: ${rem}rem (${Math.round(w)}px)`;
      } else if (el.classList.contains("clamp-demo")) {
        const w = Math.round(rect.width);
        indicatorText = `${w}px`;
        labelText = `å¹… (clamp): ${w}px`;
      } else if (el.classList.contains("clamp-text")) {
        const fs = parseFloat(getComputedStyle(el).fontSize);
        const rootFont =
          parseFloat(getComputedStyle(document.documentElement).fontSize) || 16;
        const rem = (fs / rootFont).toFixed(2);
        indicatorText = `font-size: ${Math.round(fs)}px (${rem}rem)`;
        // clamp-text ã¯ãƒ©ãƒ™ãƒ«ã¯æ—¢å­˜ãƒ†ã‚­ã‚¹ãƒˆã‚’æ®‹ã—ãŸã„ã®ã§çŸ­ã‚ã«
        labelText = `ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚º: ${Math.round(fs)}px`;
      } else {
        indicatorText = `${Math.round(rect.width)}Ã—${Math.round(
          rect.height
        )}px`;
        labelText = `${Math.round(rect.width)}Ã—${Math.round(rect.height)}px`;
      }

      // ãƒ©ãƒ™ãƒ«ã¨ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’æ›´æ–°ï¼ˆindicator ã¯ä¸‹éƒ¨ã€label ã¯ä¸Šéƒ¨ï¼‰
      lbl.textContent = labelText;
      ind.textContent = indicatorText;
    });

    const parent = document.querySelector(".parent-container");
    if (parent) {
      const instruction = parent.querySelector(".instruction");
      const style = window.getComputedStyle(parent);
      instruction.textContent = `è¦ªã‚³ãƒ³ãƒ†ãƒŠã®ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º: ${style.fontSize}`;
    }
  }

  const handle = debounce(updateIndicators, 80);
  updateIndicators();
  window.addEventListener("resize", handle);
  // ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤‰ãˆãŸã‚Š CSS ã‚’ç·¨é›†ã—ãŸæ™‚ã«åæ˜ ã•ã›ãŸã„å ´åˆã¯ MutationObserver ã‚‚æœ‰åŠ¹
  const mo = new MutationObserver(debounce(updateIndicators, 300));
  mo.observe(document.documentElement, {
    attributes: true,
    subtree: true,
    childList: true,
  });
});

  </script>
</html>
